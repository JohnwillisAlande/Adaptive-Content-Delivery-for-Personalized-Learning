{"version":3,"file":"static/js/346.ee668540.chunk.js","mappings":"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","sources":["UploadMaterial.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { ClipLoader } from 'react-spinners';\nimport { FaExclamationTriangle } from 'react-icons/fa';\nimport api from './api';\nimport { useAuth } from './context/AuthContext';\n\nconst FILE_BASE_URL = process.env.REACT_APP_FILE_BASE_URL || 'http://localhost:5000';\n\nconst FORMAT_OPTIONS = [\n  { value: 'Visual', label: 'Visual (video, diagrams, animations)' },\n  { value: 'Verbal', label: 'Verbal (text-heavy, lecture-style)' },\n  { value: 'Audio', label: 'Audio (podcasts, spoken lectures)' }\n];\n\nconst TYPE_OPTIONS = [\n  { value: 'Abstract', label: 'Abstract (theory, concepts, definitions)' },\n  { value: 'Concrete', label: 'Concrete (worked examples, real cases)' }\n];\n\nconst CATEGORY_OPTIONS = [\n  { value: 'Video', label: 'Video lesson' },\n  { value: 'Example', label: 'Example or case study' },\n  { value: 'Exercise', label: 'Practice exercise' },\n  { value: 'Quiz', label: 'Quiz or assessment' },\n  { value: 'Reading', label: 'Reading or article' },\n  { value: 'Outline', label: 'Course outline / overview' },\n  { value: 'Concept Map', label: 'Concept map / diagram' },\n  { value: 'Audio', label: 'Audio lesson' },\n  { value: 'Flashcards', label: 'Flashcards set' },\n  { value: 'PDF', label: 'PDF handout or workbook' }\n];\n\nconst VIDEO_CATEGORIES = new Set(['Video', 'Example']);\nconst FILE_CATEGORIES = new Set(['Reading', 'Exercise', 'Concept Map', 'Audio', 'Flashcards', 'PDF', 'Outline']);\nconst QUIZ_CATEGORY = 'Quiz';\nconst TEXT_OR_FILE_CATEGORIES = new Set(['Reading', 'Exercise', 'Flashcards', 'Outline']);\n\nconst resolveAssetUrl = (value) => {\n  if (!value) return '';\n  if (value.startsWith('blob:')) return value;\n  if (value.startsWith('http')) return value;\n  if (value.startsWith('/')) return `${FILE_BASE_URL}${value}`;\n  return `${FILE_BASE_URL}/uploaded_files/${value}`;\n};\n\nconst blankQuizQuestion = () => ({\n  question: '',\n  options: ['', '', '', ''],\n  correctIndex: 0\n});\n\nfunction UploadMaterial() {\n  const navigate = useNavigate();\n  const { user, isAuthenticated, initializing } = useAuth();\n  const [searchParams] = useSearchParams();\n\n  const isTeacher = useMemo(() => user?.userType === 'Teacher', [user?.userType]);\n  const courseParam = searchParams.get('courseId') || '';\n  const materialParam = searchParams.get('materialId') || '';\n\n  const [courses, setCourses] = useState([]);\n  const [form, setForm] = useState({\n    courseId: '',\n    title: '',\n    description: '',\n    order: '',\n    format: FORMAT_OPTIONS[0].value,\n    type: TYPE_OPTIONS[0].value,\n    category: CATEGORY_OPTIONS[0].value,\n    status: 'active',\n    videoSource: 'upload',\n    videoUrl: '',\n    textContent: '',\n    fileUrl: ''\n  });\n  const [thumbFile, setThumbFile] = useState(null);\n  const [thumbPreview, setThumbPreview] = useState('');\n  const [videoFile, setVideoFile] = useState(null);\n  const [contentFile, setContentFile] = useState(null);\n  const [showDeletePrompt, setShowDeletePrompt] = useState(false);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n  const [existingFilePath, setExistingFilePath] = useState('');\n  const [loadingCourses, setLoadingCourses] = useState(true);\n  const [loadingMaterial, setLoadingMaterial] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [materialId, setMaterialId] = useState(null);\n  const [existingVideoType, setExistingVideoType] = useState(null);\n  const [quizQuestions, setQuizQuestions] = useState([blankQuizQuestion()]);\n\n  useEffect(() => {\n    if (initializing) return;\n    if (!isAuthenticated || !isTeacher) {\n      toast.error('Teacher access required');\n      navigate('/home', { replace: true });\n      return;\n    }\n    fetchCourses();\n  }, [initializing, isAuthenticated, isTeacher]);\n\n  const fetchCourses = async () => {\n    setLoadingCourses(true);\n    try {\n      const { data } = await api.get('/courses/teacher/my');\n      setCourses(Array.isArray(data) ? data : []);\n    } catch (err) {\n      toast.error(err.response?.data?.error || 'Failed to load courses');\n    } finally {\n      setLoadingCourses(false);\n    }\n  };\n\n  useEffect(() => {\n    if (loadingCourses) return;\n    if (!courses.length) {\n      setForm(prev => ({ ...prev, courseId: '' }));\n      return;\n    }\n    // Determine initial course selection\n    if (courseParam && courses.find(course => course._id === courseParam)) {\n      setForm(prev => ({ ...prev, courseId: courseParam }));\n    } else if (!form.courseId) {\n      setForm(prev => ({ ...prev, courseId: courses[0]._id }));\n    }\n  }, [loadingCourses, courses, courseParam]);\n\n  useEffect(() => {\n    if (!materialParam || !isTeacher || loadingCourses) return;\n    const loadMaterial = async () => {\n      setLoadingMaterial(true);\n      try {\n        const { data } = await api.get(`/courses/teacher/materials/${materialParam}`);\n        setMaterialId(data._id);\n        const detectedCategory = data.annotations?.category || CATEGORY_OPTIONS[0].value;\n        setForm(prev => ({\n          ...prev,\n          courseId: data.courseId || prev.courseId || courseParam || '',\n          title: data.title || '',\n          description: data.description || '',\n          order: data.order ?? '',\n          format: data.annotations?.format || FORMAT_OPTIONS[0].value,\n          type: data.annotations?.type || TYPE_OPTIONS[0].value,\n          category: detectedCategory,\n          status: data.status || 'active',\n          videoSource: data.video && data.video.startsWith('http') ? 'link' : 'upload',\n          videoUrl: data.video && data.video.startsWith('http') ? data.video : '',\n          textContent: data.textContent || '',\n          fileUrl: data.fileUrl && data.fileUrl.startsWith('http') ? data.fileUrl : ''\n        }));\n        setThumbPreview(resolveAssetUrl(data.thumbUrl || ''));\n        setExistingVideoType(data.video ? (data.video.startsWith('http') ? 'link' : 'file') : null);\n        setExistingFilePath(data.fileUrl || '');\n        if (Array.isArray(data.quizData) && data.quizData.length) {\n          setQuizQuestions(\n            data.quizData.map(q => ({\n              question: q.question || '',\n              options: Array.isArray(q.options) && q.options.length ? [...q.options] : ['', '', '', ''],\n              correctIndex: typeof q.correctIndex === 'number' ? q.correctIndex : 0\n            }))\n          );\n        } else {\n          setQuizQuestions([blankQuizQuestion()]);\n        }\n        setContentFile(null);\n      } catch (err) {\n        toast.error(err.response?.data?.error || 'Failed to load material details');\n      } finally {\n        setLoadingMaterial(false);\n      }\n    };\n    loadMaterial();\n  }, [materialParam, isTeacher, loadingCourses]);\n\n  useEffect(() => {\n    if (materialId) return; // do not override order when editing\n    const selected = courses.find(course => course._id === form.courseId);\n    if (!selected) return;\n    setForm(prev => ({\n      ...prev,\n      order: prev.order || selected.materialCount + 1\n    }));\n  }, [form.courseId, courses, materialId]);\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    if (name === 'category') {\n      const requiresVideo = VIDEO_CATEGORIES.has(value);\n      const requiresFile = FILE_CATEGORIES.has(value);\n      const isQuiz = value === QUIZ_CATEGORY;\n      const allowsText = TEXT_OR_FILE_CATEGORIES.has(value);\n      setForm(prev => ({\n        ...prev,\n        category: value,\n        videoSource: requiresVideo ? prev.videoSource : 'upload',\n        videoUrl: requiresVideo ? prev.videoUrl : '',\n        fileUrl: requiresFile ? prev.fileUrl : '',\n        textContent: (isQuiz || allowsText) ? prev.textContent : ''\n      }));\n      if (!requiresVideo) {\n        setVideoFile(null);\n        setExistingVideoType(null);\n      }\n      if (!requiresFile) {\n        setContentFile(null);\n        setExistingFilePath('');\n      }\n      if (!isQuiz) {\n        setQuizQuestions(prev => (prev.length ? prev : [blankQuizQuestion()]));\n      } else if (quizQuestions.length === 0) {\n        setQuizQuestions([blankQuizQuestion()]);\n      }\n      return;\n    }\n    setForm(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleVideoSourceChange = (event) => {\n    if (!VIDEO_CATEGORIES.has(form.category)) {\n      return;\n    }\n    const { value } = event.target;\n    setForm(prev => ({\n      ...prev,\n      videoSource: value,\n      videoUrl: value === 'link' ? prev.videoUrl : ''\n    }));\n    if (value === 'link') {\n      setVideoFile(null);\n      setExistingVideoType(prevType => (prevType === 'link' ? 'link' : null));\n    } else {\n      setExistingVideoType(prevType => (prevType === 'file' ? 'file' : null));\n    }\n  };\n\nconst handleThumbChange = (event) => {\n  const file = event.target.files?.[0];\n  setThumbFile(file || null);\n  setThumbPreview(prev => {\n    if (prev && prev.startsWith('blob:')) {\n      URL.revokeObjectURL(prev);\n    }\n    if (file) {\n      return URL.createObjectURL(file);\n    }\n    return prev && prev.startsWith('blob:') ? '' : prev;\n  });\n};\n\nconst handleVideoFileChange = (event) => {\n  const file = event.target.files?.[0];\n  setVideoFile(file || null);\n  if (file) {\n    setExistingVideoType('file');\n  }\n};\n\nconst handleContentFileChange = (event) => {\n  const file = event.target.files?.[0];\n  setContentFile(file || null);\n  if (file) {\n    setExistingFilePath('');\n  }\n};\n\nuseEffect(() => {\n  return () => {\n    if (thumbPreview && thumbPreview.startsWith('blob:')) {\n      URL.revokeObjectURL(thumbPreview);\n    }\n  };\n}, [thumbPreview]);\n  const requiresVideo = useMemo(() => VIDEO_CATEGORIES.has(form.category), [form.category]);\n  const requiresFile = useMemo(() => FILE_CATEGORIES.has(form.category), [form.category]);\n  const isQuizCategory = form.category === QUIZ_CATEGORY;\n  const allowsTextFallback = useMemo(() => TEXT_OR_FILE_CATEGORIES.has(form.category), [form.category]);\n  const resolvedExistingFileLink = useMemo(\n    () => resolveAssetUrl(existingFilePath),\n    [existingFilePath]\n  );\n  const existingFileName = useMemo(() => {\n    if (!existingFilePath) return '';\n    const segments = existingFilePath.split(/[/\\\\]/);\n    return segments[segments.length - 1] || '';\n  }, [existingFilePath]);\n\n  const handleQuestionTextChange = (index, value) => {\n    setQuizQuestions(prev => prev.map((question, i) => (\n      i === index ? { ...question, question: value } : question\n    )));\n  };\n\n  const handleOptionChange = (questionIndex, optionIndex, value) => {\n    setQuizQuestions(prev => prev.map((question, i) => {\n      if (i !== questionIndex) return question;\n      const options = [...question.options];\n      options[optionIndex] = value;\n      return { ...question, options };\n    }));\n  };\n\n  const handleCorrectIndexChange = (questionIndex, optionIndex) => {\n    setQuizQuestions(prev => prev.map((question, i) => (\n      i === questionIndex ? { ...question, correctIndex: optionIndex } : question\n    )));\n  };\n\n  const handleAddQuestion = () => {\n    setQuizQuestions(prev => [...prev, blankQuizQuestion()]);\n  };\n\n  const handleRemoveQuestion = (index) => {\n    setQuizQuestions(prev => (prev.length > 1 ? prev.filter((_, i) => i !== index) : prev));\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const hasExistingVideo = Boolean(materialId && existingVideoType);\n    const hasExistingFile = Boolean(materialId && existingFilePath);\n    const trimmedTextContent = form.textContent && form.textContent.trim() ? form.textContent.trim() : '';\n    const trimmedFileUrl = form.fileUrl && form.fileUrl.trim() ? form.fileUrl.trim() : '';\n\n    if (!form.courseId) {\n      toast.error('Please choose a course');\n      return;\n    }\n    if (!form.title.trim() || !form.description.trim()) {\n      toast.error('Title and description are required');\n      return;\n    }\n    if (!form.order || Number(form.order) < 1) {\n      toast.error('Lesson number must be at least 1');\n      return;\n    }\n    if (!materialId && !thumbFile) {\n      toast.error('Thumbnail image is required for new materials');\n      return;\n    }\n\n    if (requiresVideo) {\n      if (form.videoSource === 'link') {\n        if (!form.videoUrl.trim() && !(hasExistingVideo && existingVideoType === 'link')) {\n          toast.error('Provide a video link or upload a video file');\n          return;\n        }\n      } else if (!videoFile && !(hasExistingVideo && existingVideoType === 'file')) {\n        toast.error('Upload a video file or switch to link mode');\n        return;\n      }\n    }\n\n    if (requiresFile && !contentFile && !trimmedFileUrl && !hasExistingFile) {\n      if (!(allowsTextFallback && trimmedTextContent)) {\n        toast.error('Upload a file, provide a file link, or supply text instructions for this content type');\n        return;\n      }\n    }\n\n    let sanitizedQuiz = null;\n    if (isQuizCategory) {\n      sanitizedQuiz = quizQuestions.map(question => ({\n        question: question.question.trim(),\n        options: question.options.map(opt => opt.trim()),\n        correctIndex: question.correctIndex\n      }));\n      for (const q of sanitizedQuiz) {\n        if (!q.question) {\n          toast.error('Each quiz question needs text');\n          return;\n        }\n        if (q.options.some(opt => !opt)) {\n          toast.error('Quiz questions require all answer options');\n          return;\n        }\n        if (q.correctIndex < 0 || q.correctIndex >= q.options.length) {\n          toast.error('Select a correct answer for each quiz question');\n          return;\n        }\n      }\n    }\n\n    setSaving(true);\n    const payload = new FormData();\n    payload.append('title', form.title.trim());\n    payload.append('description', form.description.trim());\n    payload.append('order', form.order);\n    payload.append('format', form.format);\n    payload.append('type', form.type);\n    payload.append('category', form.category);\n    payload.append('status', form.status);\n    payload.append('textContent', trimmedTextContent);\n    payload.append('fileUrl', trimmedFileUrl);\n\n    if (requiresVideo) {\n      if (form.videoSource === 'link' && form.videoUrl.trim()) {\n        payload.append('videoUrl', form.videoUrl.trim());\n      } else if (videoFile) {\n        payload.append('videoFile', videoFile);\n      }\n    } else if (form.videoSource === 'link' && form.videoUrl.trim()) {\n      payload.append('videoUrl', form.videoUrl.trim());\n    } else if (videoFile) {\n      payload.append('videoFile', videoFile);\n    }\n\n    if (contentFile) {\n      payload.append('contentFile', contentFile);\n    }\n\n    if (thumbFile) {\n      payload.append('thumb', thumbFile);\n    }\n\n    if (isQuizCategory && sanitizedQuiz) {\n      payload.append('quizData', JSON.stringify(sanitizedQuiz));\n    }\n\n    const endpoint = materialId\n      ? `/courses/teacher/${form.courseId}/materials/${materialId}`\n      : `/courses/teacher/${form.courseId}/materials`;\n    try {\n      if (materialId) {\n        await api.put(endpoint, payload, {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        });\n        toast.success('Material updated');\n      } else {\n        await api.post(endpoint, payload, {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        });\n        toast.success('Material uploaded');\n      }\n      navigate('/teacher/courses');\n    } catch (err) {\n      toast.error(err.response?.data?.error || 'Failed to save material');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleMaterialDelete = async () => {\n    if (!materialId || !form.courseId) return;\n    setDeleteLoading(true);\n    try {\n      await api.delete(`/courses/teacher/${form.courseId}/materials/${materialId}`);\n      toast.success('Material deleted');\n      navigate('/teacher/courses');\n    } catch (err) {\n      toast.error(err.response?.data?.error || 'Failed to delete material');\n    } finally {\n      setDeleteLoading(false);\n      setShowDeletePrompt(false);\n    }\n  };\n\n  if (initializing || !isTeacher) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-[#0f1117] text-white\">\n        <ClipLoader color=\"#14b8a6\" size={32} />\n      </div>\n    );\n  }\n\n  return (\n    <>\n    <section className=\"teachers upload-page\">\n      <h1 className=\"heading\">{materialId ? 'Edit Course Material' : 'Upload Course Material'}</h1>\n      <div className=\"form-screen form-screen--plain form-screen--stacked\">\n        <div className=\"form-card form-card--xl upload-card\">\n          <p className=\"form-card__subtitle form-card__subtitle--left upload-card__intro\">\n            Every field below feeds your adaptive learning engine. Use the lesson number to keep modules in sequence,\n            select the primary format and purpose of the lesson, and label the category so the recommender can match\n            students with the right activities. Accurate metadata keeps the ML models smart.\n          </p>\n\n          {loadingCourses || loadingMaterial ? (\n            <div className=\"form-loader\">\n              <ClipLoader color=\"#14b8a6\" size={32} />\n            </div>\n          ) : (\n            <form onSubmit={handleSubmit} className=\"upload-form form-grid-two\" encType=\"multipart/form-data\">\n              <div className=\"full-span\">\n                <label htmlFor=\"material-course\">\n                  Course <span className=\"required-indicator\">*</span>\n                </label>\n                <select\n                  id=\"material-course\"\n                  name=\"courseId\"\n                  value={form.courseId}\n                  onChange={handleInputChange}\n                  required\n                >\n                  {courses.map(course => (\n                    <option key={course._id} value={course._id}>\n                      {course.title}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label htmlFor=\"material-order\">\n                  Lesson number <span className=\"required-indicator\">*</span>\n                </label>\n                <input\n                  id=\"material-order\"\n                  type=\"number\"\n                  min={1}\n                  name=\"order\"\n                  value={form.order}\n                  onChange={handleInputChange}\n                  required\n                  placeholder=\"1\"\n                />\n              </div>\n              <div>\n                <label htmlFor=\"material-format\">Primary format</label>\n                <select\n                  id=\"material-format\"\n                  name=\"format\"\n                  value={form.format}\n                  onChange={handleInputChange}\n                >\n                  {FORMAT_OPTIONS.map(option => (\n                    <option key={option.value} value={option.value}>\n                      {option.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label htmlFor=\"material-type\">Content purpose</label>\n                <select\n                  id=\"material-type\"\n                  name=\"type\"\n                  value={form.type}\n                  onChange={handleInputChange}\n                >\n                  {TYPE_OPTIONS.map(option => (\n                    <option key={option.value} value={option.value}>\n                      {option.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label htmlFor=\"material-category\">Content category</label>\n                <select\n                  id=\"material-category\"\n                  name=\"category\"\n                  value={form.category}\n                  onChange={handleInputChange}\n                >\n                  {CATEGORY_OPTIONS.map(option => (\n                    <option key={option.value} value={option.value}>\n                      {option.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label htmlFor=\"material-status\">Material status</label>\n                <select\n                  id=\"material-status\"\n                  name=\"status\"\n                  value={form.status}\n                  onChange={handleInputChange}\n                >\n                  <option value=\"active\">Active &ndash; visible to students</option>\n                  <option value=\"deactive\">Inactive &ndash; hidden from students</option>\n                </select>\n                <p className=\"field-hint\">\n                  Deactivate content to hide it from learners without deleting the file.\n                </p>\n              </div>\n              <div className=\"full-span\">\n                <label htmlFor=\"material-title\">\n                  Title <span className=\"required-indicator\">*</span>\n                </label>\n                <input\n                  id=\"material-title\"\n                  name=\"title\"\n                  value={form.title}\n                  onChange={handleInputChange}\n                  required\n                  placeholder=\"Lesson title\"\n                />\n              </div>\n              <div className=\"full-span\">\n                <label htmlFor=\"material-description\">\n                  Description <span className=\"required-indicator\">*</span>\n                </label>\n                <textarea\n                  id=\"material-description\"\n                  name=\"description\"\n                  value={form.description}\n                  onChange={handleInputChange}\n                  required\n                  rows={4}\n                  placeholder=\"Summarize what this lesson covers\"\n                />\n              </div>\n              <div>\n                <label htmlFor=\"material-thumb\">Thumbnail image</label>\n                <input\n                  id=\"material-thumb\"\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleThumbChange}\n                />\n                {thumbPreview && (\n                  <img src={thumbPreview} alt=\"Thumbnail preview\" className=\"form-preview\" />\n                )}\n              </div>\n              <div className=\"form-checkbox\">\n                <input\n                  id=\"material-featured\"\n                  type=\"checkbox\"\n                  name=\"featured\"\n                  checked={form.featured}\n                  onChange={handleInputChange}\n                />\n                <label htmlFor=\"material-featured\">Mark as featured course</label>\n              </div>\n\n              {requiresVideo && (\n                <div className=\"full-span upload-form__segment\">\n                  <label>Video source</label>\n                  <div className=\"form-tab-group\">\n                    <label>\n                      <input\n                        type=\"radio\"\n                        value=\"upload\"\n                        checked={form.videoSource === 'upload'}\n                        onChange={handleVideoSourceChange}\n                      />\n                      <span>Upload file</span>\n                    </label>\n                    <label>\n                      <input\n                        type=\"radio\"\n                        value=\"link\"\n                        checked={form.videoSource === 'link'}\n                        onChange={handleVideoSourceChange}\n                      />\n                      <span>YouTube / video link</span>\n                    </label>\n                  </div>\n                  {form.videoSource === 'upload' ? (\n                    <div className=\"upload-form__field\">\n                      <input\n                        type=\"file\"\n                        accept=\"video/*\"\n                        onChange={handleVideoFileChange}\n                      />\n                      {existingVideoType === 'file' && !videoFile && materialId && (\n                        <p className=\"form-note\">Current video will be kept unless you upload a new file.</p>\n                      )}\n                    </div>\n                  ) : (\n                    <input\n                      type=\"url\"\n                      name=\"videoUrl\"\n                      value={form.videoUrl}\n                      onChange={handleInputChange}\n                      placeholder=\"https://www.youtube.com/watch?v=...\"\n                    />\n                  )}\n                  {existingVideoType === 'link' && form.videoSource !== 'link' && materialId && (\n                    <p className=\"form-note\">Current linked video will remain unless you change it.</p>\n                  )}\n                </div>\n              )}\n\n              {requiresFile && (\n                <div>\n                  <label htmlFor=\"material-file-upload\">Upload file (PDF, audio, etc.)</label>\n                  <input\n                    id=\"material-file-upload\"\n                    type=\"file\"\n                    onChange={handleContentFileChange}\n                  />\n                  {existingFilePath && !contentFile && materialId && (\n                    <p className=\"form-note\">\n                      Current file:{' '}\n                      {resolvedExistingFileLink ? (\n                        <a\n                          href={resolvedExistingFileLink}\n                          target=\"_blank\"\n                          rel=\"noreferrer\"\n                        >\n                          {existingFileName}\n                        </a>\n                      ) : (\n                        <span>{existingFileName}</span>\n                      )}\n                    </p>\n                  )}\n                </div>\n              )}\n\n              {requiresFile && (\n                <div>\n                  <label htmlFor=\"material-file-url\">File link (optional)</label>\n                  <input\n                    id=\"material-file-url\"\n                    type=\"url\"\n                    name=\"fileUrl\"\n                    value={form.fileUrl}\n                    onChange={handleInputChange}\n                    placeholder=\"https://...\"\n                  />\n                </div>\n              )}\n\n              {(requiresFile || isQuizCategory) && (\n                <div className=\"full-span\">\n                  <label htmlFor=\"material-text-content\">Supporting text / instructions (optional)</label>\n                  <textarea\n                    id=\"material-text-content\"\n                    name=\"textContent\"\n                    value={form.textContent}\n                    onChange={handleInputChange}\n                    rows={4}\n                    placeholder=\"Add guidance, reading excerpts, or exercise instructions\"\n                  />\n                </div>\n              )}\n\n              {isQuizCategory && (\n                <div className=\"full-span quiz-builder\">\n                  <label>Quiz builder</label>\n                  <div className=\"quiz-builder__list\">\n                    {quizQuestions.map((question, qIndex) => (\n                      <div key={`quiz-question-${qIndex}`} className=\"quiz-card\">\n                        <div className=\"quiz-card__header\">\n                          <div className=\"quiz-card__question\">\n                            <label htmlFor={`quiz-question-${qIndex}`}>Question {qIndex + 1}</label>\n                            <input\n                              id={`quiz-question-${qIndex}`}\n                              type=\"text\"\n                              value={question.question}\n                              onChange={(e) => handleQuestionTextChange(qIndex, e.target.value)}\n                              placeholder=\"Enter the quiz question\"\n                            />\n                          </div>\n                          {quizQuestions.length > 1 && (\n                            <button\n                              type=\"button\"\n                              className=\"option-btn\"\n                              onClick={() => handleRemoveQuestion(qIndex)}\n                            >\n                              Remove\n                            </button>\n                          )}\n                        </div>\n                        <div className=\"quiz-card__options\">\n                          {question.options.map((option, optionIndex) => (\n                            <label\n                              key={`quiz-question-${qIndex}-option-${optionIndex}`}\n                              className=\"quiz-option\"\n                            >\n                              <input\n                                type=\"radio\"\n                                name={`question-${qIndex}-correct`}\n                                checked={question.correctIndex === optionIndex}\n                                onChange={() => handleCorrectIndexChange(qIndex, optionIndex)}\n                              />\n                              <input\n                                type=\"text\"\n                                value={option}\n                                onChange={(e) => handleOptionChange(qIndex, optionIndex, e.target.value)}\n                                placeholder={`Option ${optionIndex + 1}`}\n                              />\n                            </label>\n                          ))}\n                        </div>\n                      </div>\n                    ))}\n                    <button\n                      type=\"button\"\n                      className=\"inline-option-btn\"\n                      onClick={handleAddQuestion}\n                    >\n                      Add another question\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"full-span form-actions horizontal\">\n                <button\n                  type=\"submit\"\n                  className=\"btn\"\n                  disabled={saving}\n                >\n                  {saving ? <ClipLoader color=\"#fff\" size={18} /> : materialId ? 'Update material' : 'Upload material'}\n                </button>\n                <button\n                  type=\"button\"\n                  className=\"option-btn\"\n                  onClick={() => navigate('/teacher/courses')}\n                >\n                  Cancel\n                </button>\n                {materialId && (\n                  <button\n                    type=\"button\"\n                    className=\"delete-btn\"\n                    onClick={() => setShowDeletePrompt(true)}\n                    disabled={saving}\n                  >\n                    Delete material\n                  </button>\n                )}\n              </div>\n          </form>\n        )}\n      </div>\n    </div>\n    </section>\n      {materialId && showDeletePrompt && (\n        <div className=\"danger-modal\" role=\"dialog\" aria-modal=\"true\">\n          <div className=\"danger-modal__card\">\n            <div className=\"danger-modal__icon\">\n              <FaExclamationTriangle />\n            </div>\n            <h3 className=\"danger-modal__title\">Delete this material?</h3>\n            <p className=\"danger-modal__copy\">\n              Removing this lesson erases its files and analytics permanently. Students will immediately lose access.\n            </p>\n            <div className=\"danger-modal__actions\">\n              <button\n                type=\"button\"\n                className=\"delete-btn\"\n                onClick={handleMaterialDelete}\n                disabled={deleteLoading}\n              >\n                {deleteLoading ? <ClipLoader size={18} color=\"#fff\" /> : 'Delete material'}\n              </button>\n              <button\n                type=\"button\"\n                className=\"option-btn\"\n                onClick={() => setShowDeletePrompt(false)}\n                disabled={deleteLoading}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default UploadMaterial;\n"],"names":["FILE_BASE_URL","process","REACT_APP_FILE_BASE_URL","FORMAT_OPTIONS","value","label","TYPE_OPTIONS","CATEGORY_OPTIONS","VIDEO_CATEGORIES","Set","FILE_CATEGORIES","QUIZ_CATEGORY","TEXT_OR_FILE_CATEGORIES","resolveAssetUrl","startsWith","concat","navigate","useNavigate","user","isAuthenticated","initializing","useAuth","searchParams","useSearchParams","isTeacher","useMemo","userType","courseParam","get","materialParam","courses","setCourses","useState","form","setForm","courseId","title","description","order","format","type","category","status","videoSource","videoUrl","textContent","fileUrl","thumbFile","setThumbFile","thumbPreview","setThumbPreview","videoFile","setVideoFile","contentFile","setContentFile","showDeletePrompt","setShowDeletePrompt","deleteLoading","setDeleteLoading","existingFilePath","setExistingFilePath","loadingCourses","setLoadingCourses","loadingMaterial","setLoadingMaterial","saving","setSaving","materialId","setMaterialId","existingVideoType","setExistingVideoType","quizQuestions","setQuizQuestions","question","options","correctIndex","useEffect","fetchCourses","toast","error","replace","async","data","api","Array","isArray","err","_err$response","_err$response$data","response","length","find","course","_id","prev","_objectSpread","_data$annotations","detectedCategory","annotations","_data$order","_data$annotations2","_data$annotations3","video","thumbUrl","quizData","map","q","_err$response2","_err$response2$data","loadMaterial","selected","materialCount","handleInputChange","event","name","target","requiresVideo","has","requiresFile","isQuiz","allowsText","handleVideoSourceChange","prevType","URL","revokeObjectURL","isQuizCategory","allowsTextFallback","resolvedExistingFileLink","existingFileName","segments","split","_jsx","className","children","ClipLoader","color","size","_jsxs","_Fragment","onSubmit","preventDefault","hasExistingVideo","Boolean","hasExistingFile","trimmedTextContent","trim","trimmedFileUrl","Number","sanitizedQuiz","opt","some","payload","FormData","append","JSON","stringify","endpoint","put","headers","success","post","_err$response3","_err$response3$data","encType","htmlFor","id","onChange","required","min","placeholder","option","rows","accept","_event$target$files","file","files","createObjectURL","src","alt","checked","featured","_event$target$files2","_event$target$files3","href","rel","qIndex","e","handleQuestionTextChange","index","i","onClick","handleRemoveQuestion","filter","_","optionIndex","handleCorrectIndexChange","questionIndex","handleOptionChange","handleAddQuestion","disabled","role","FaExclamationTriangle","delete","_err$response4","_err$response4$data"],"sourceRoot":""}