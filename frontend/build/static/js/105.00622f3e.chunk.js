"use strict";(self.webpackChunkapex101_frontend=self.webpackChunkapex101_frontend||[]).push([[105],{105:(e,o,s)=>{s.r(o),s.d(o,{default:()=>h});var l=s(43),t=s(439),i=s(488),r=s(939),n=s.n(r),a=s(768),d=s(697),c=s(579);const u={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GEMINI_API_KEY:"AIzaSyCrxqeqgsp8qubxzmo4Yvzzh7S7-0hzXEc",REACT_APP_GOOGLE_CLIENT_ID:"776006269077-683ndu3i60s7o3tu1bn1m1rb3mukc03u.apps.googleusercontent.com"}.REACT_APP_FILE_BASE_URL||"http://localhost:5000",v=e=>{const o=(null===e||void 0===e?void 0:e.thumbnail)||(null===e||void 0===e?void 0:e.thumb)||(null===e||void 0===e?void 0:e.backgroundImage)||(null===e||void 0===e?void 0:e.image);return o?o.startsWith("http")?o:o.startsWith("/")?"".concat(u).concat(o):"".concat(u,"/uploaded_files/").concat(o):"https://images.unsplash.com/photo-1523580846011-d3a5bc25702b?w=1200&q=80"},m=e=>Number.isNaN(e)?0:Math.min(100,Math.max(0,Math.round(e)));const h=function(){const e=(0,t.Zp)(),{user:o,isAuthenticated:s,initializing:r}=(0,d.A)(),[u,h]=(0,l.useState)([]),[p,g]=(0,l.useState)(!0);(0,l.useEffect)(()=>{if(r)return;if(!s)return i.oR.error("Please login to view your courses"),void e("/login",{replace:!0});if("Student"!==(null===o||void 0===o?void 0:o.userType))return i.oR.error("Students only"),void e("/home",{replace:!0});let l=!0;return(async()=>{g(!0);try{const{data:e}=await a.A.get("/courses/student/my");if(!l)return;h(Array.isArray(e)?e:[])}catch(s){var e,o;if(!l)return;i.oR.error((null===(e=s.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.error)||"Failed to load enrolled courses")}finally{l&&g(!1)}})(),()=>{l=!1}},[r,s,null===o||void 0===o?void 0:o.userType,e]);const y=(0,l.useMemo)(()=>[...u].sort((e,o)=>{var s,l,t,i;const r=m(null!==(s=null!==(l=null===e||void 0===e?void 0:e.progressPercent)&&void 0!==l?l:null===e||void 0===e?void 0:e.progress)&&void 0!==s?s:0);return m(null!==(t=null!==(i=null===o||void 0===o?void 0:o.progressPercent)&&void 0!==i?i:null===o||void 0===o?void 0:o.progress)&&void 0!==t?t:0)-r}),[u]),x=async o=>{const s=(null===o||void 0===o?void 0:o.id)||(null===o||void 0===o?void 0:o._id)||(null===o||void 0===o?void 0:o.courseId);if(!s)return;let l="/courses/".concat(s);try{const{data:e}=await a.A.get("/courses/".concat(s),{params:{page:1,pageSize:1,format:"All"}}),o=Boolean(null===e||void 0===e?void 0:e.enrollmentRequired),t=Array.isArray(null===e||void 0===e?void 0:e.materials)?e.materials:[];if(!o&&t.length>0){const e=t[0],o=(null===e||void 0===e?void 0:e._id)||(null===e||void 0===e?void 0:e.id);o&&(l="/courses/".concat(s,"/materials/").concat(o))}}catch(t){}e(l)};return p?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#0f1117] text-white",children:(0,c.jsx)(n(),{color:"#14b8a6",size:32})}):(0,c.jsxs)("div",{className:"main-content",children:[(0,c.jsx)("h1",{className:"heading",children:"My Courses"}),(0,c.jsx)("p",{className:"subheading",children:"Track your progress, revisit completed lessons, and pick up exactly where you left off."}),(0,c.jsx)("div",{className:"box-container",children:0===y.length?(0,c.jsx)("div",{className:"empty",children:"You have not enrolled in any courses yet. Visit the catalogue to start learning."}):y.map(e=>{var o,s,l,t,i,r,n;const a=e.id||e._id||e.courseId,d=e.title||e.name||"Untitled course",u=e.subtitle||e.tagline||"",h=e.description||e.summary||"",p=e.duration||e.length||"",g=null!==(o=null!==(s=e.completedMaterials)&&void 0!==s?s:e.completedLessons)&&void 0!==o?o:0,y=null!==(l=null!==(t=null!==(i=e.totalMaterials)&&void 0!==i?i:e.totalLessons)&&void 0!==t?t:e.lessons)&&void 0!==l?l:0,b=m(null!==(r=null!==(n=null===e||void 0===e?void 0:e.progressPercent)&&void 0!==n?n:null===e||void 0===e?void 0:e.progress)&&void 0!==r?r:0),_="".concat(b,"% complete");return(0,c.jsxs)("div",{className:"box my-course-card",role:"button",tabIndex:0,onClick:()=>x(e),onKeyDown:o=>{"Enter"===o.key&&x(e)},style:{cursor:"pointer"},children:[(0,c.jsxs)("div",{className:"relative mb-4",children:[(0,c.jsx)("img",{src:v(e),alt:d,className:"thumb",style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"0.75rem"},loading:"lazy"}),(0,c.jsx)("span",{className:"absolute top-3 left-3 bg-teal-500 text-white text-xs font-semibold px-3 py-1 rounded-full shadow",children:_})]}),(0,c.jsx)("div",{className:"title",children:d}),u&&(0,c.jsx)("div",{style:{color:"#8892b0",marginBottom:"0.5rem"},children:u}),h&&(0,c.jsx)("div",{style:{marginBottom:"1rem",color:"#94a3b8"},children:h}),(0,c.jsxs)("div",{className:"my-course-meta",children:[p&&(0,c.jsx)("span",{children:p}),y>0&&(0,c.jsxs)("span",{children:[g," / ",y," materials"]})]}),(0,c.jsxs)("div",{className:"my-course-progress","aria-label":"Course completion ".concat(_),role:"progressbar","aria-valuenow":b,"aria-valuemin":0,"aria-valuemax":100,children:[(0,c.jsx)("div",{className:"my-course-progress__track",children:(0,c.jsx)("div",{className:"my-course-progress__value",style:{width:"".concat(b,"%")}})}),(0,c.jsxs)("span",{className:"my-course-progress__label",children:[b,"%"]})]}),(0,c.jsx)("button",{type:"button",className:"inline-btn",onClick:o=>{o.stopPropagation(),x(e)},"aria-label":"Continue learning ".concat(d),children:"Continue learning"})]},a||d)})})]})}}}]);
//# sourceMappingURL=105.00622f3e.chunk.js.map