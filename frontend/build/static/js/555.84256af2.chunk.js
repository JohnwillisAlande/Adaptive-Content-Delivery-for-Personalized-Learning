"use strict";(self.webpackChunkapex101_frontend=self.webpackChunkapex101_frontend||[]).push([[555],{936:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var l=a(43),n=a(939),i=a.n(n),t=a(768),c=(a(50),a(579));const d=["#38bdf8","#f472b6","#facc15","#22d3ee","#a78bfa","#34d399"],r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!e)return"0m";const s=Math.round(e/60);if(s<60)return"".concat(s,"m");const a=(s/60).toFixed(1);return"".concat(a,"h")},o=e=>{if(!e)return"\u2014";try{return new Date(e).toLocaleString()}catch(s){return e}};const h=function(){var e,s,a,n,h,m,u,x,j,p,v,N,y,_;const[g,b]=(0,l.useState)(null),[S,f]=(0,l.useState)(!0),[k,w]=(0,l.useState)(""),[M,C]=(0,l.useState)("bar"),[L,A]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=!0;return f(!0),t.A.get("/students/me/analytics").then(s=>{let{data:a}=s;e&&(b(a),w(""))}).catch(s=>{var a,l;e&&w((null===(a=s.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.error)||"Failed to load analytics")}).finally(()=>e&&f(!1)),()=>{e=!1}},[]);const T=null!==(e=null===g||void 0===g?void 0:g.formatBreakdown)&&void 0!==e?e:[],E=null!==(s=null===g||void 0===g?void 0:g.timeline)&&void 0!==s?s:[],F=null!==(a=null===g||void 0===g?void 0:g.topMaterials)&&void 0!==a?a:[],I=null!==(n=null===g||void 0===g?void 0:g.recentSessions)&&void 0!==n?n:[],P=null!==(h=null===g||void 0===g?void 0:g.summary)&&void 0!==h?h:{},B=(0,l.useMemo)(()=>T.reduce((e,s)=>e+(s.timeSpentSeconds||0),0)||1,[T]),R=(0,l.useMemo)(()=>{if(!T.length)return"conic-gradient(#1e293b, #0f172a)";let e=0;const s=T.map((s,a)=>{const l=e;e+=(s.timeSpentSeconds||0)/B;const n=e;return"".concat(d[a%d.length]," ").concat(100*l,"% ").concat(100*n,"%")});return"conic-gradient(".concat(s.join(","),")")},[T,B]),z=Math.max(...E.map(e=>e.timeSpentSeconds||0),1);return S?(0,c.jsx)("div",{className:"student-analytics student-analytics--loading",children:(0,c.jsx)(i(),{color:"#14b8a6",size:40})}):k?(0,c.jsx)("div",{className:"student-analytics student-analytics--error",children:(0,c.jsx)("p",{children:k})}):(0,c.jsxs)("div",{className:"student-analytics",children:[(0,c.jsxs)("header",{className:"student-analytics__hero",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"student-analytics__eyebrow",children:"Personalized Insights"}),(0,c.jsx)("h1",{children:"Learning Analytics"}),(0,c.jsx)("p",{children:"Track how you engage with ApexLearn across every material type."})]}),(0,c.jsxs)("div",{className:"student-analytics__profile",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"label",children:"XP"}),(0,c.jsx)("p",{className:"value",children:null!==(m=null===g||void 0===g||null===(u=g.profile)||void 0===u?void 0:u.xp)&&void 0!==m?m:0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"label",children:"Badges"}),(0,c.jsx)("p",{className:"value",children:null!==(x=null===g||void 0===g||null===(j=g.profile)||void 0===j?void 0:j.badges)&&void 0!==x?x:0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"label",children:"Login Streak"}),(0,c.jsxs)("p",{className:"value",children:[null!==(p=null===g||void 0===g||null===(v=g.profile)||void 0===v||null===(N=v.streaks)||void 0===N?void 0:N.login)&&void 0!==p?p:0," days"]})]})]})]}),(0,c.jsxs)("section",{className:"student-analytics__summary",children:[(0,c.jsxs)("article",{children:[(0,c.jsx)("p",{className:"label",children:"Engagement Time"}),(0,c.jsx)("p",{className:"value",children:r(P.totalTimeSpentSeconds)}),(0,c.jsx)("span",{children:"Total time spent learning"})]}),(0,c.jsxs)("article",{children:[(0,c.jsx)("p",{className:"label",children:"Learning Sessions"}),(0,c.jsx)("p",{className:"value",children:null!==(y=P.totalSessions)&&void 0!==y?y:0}),(0,c.jsx)("span",{children:"Tracked lessons"})]}),(0,c.jsxs)("article",{children:[(0,c.jsx)("p",{className:"label",children:"Avg Session"}),(0,c.jsx)("p",{className:"value",children:r(P.avgSessionSeconds)}),(0,c.jsx)("span",{children:"Per visit"})]}),(0,c.jsxs)("article",{children:[(0,c.jsx)("p",{className:"label",children:"Completion Rate"}),(0,c.jsxs)("p",{className:"value",children:[(100*(P.completionRate||0)).toFixed(0),"%"]}),(0,c.jsx)("span",{children:"Marked as complete"})]}),(0,c.jsxs)("article",{children:[(0,c.jsx)("p",{className:"label",children:"Courses Enrolled"}),(0,c.jsx)("p",{className:"value",children:null!==(_=P.coursesEnrolled)&&void 0!==_?_:0}),(0,c.jsx)("span",{children:"Active courses"})]}),(0,c.jsxs)("article",{children:[(0,c.jsx)("p",{className:"label",children:"Last active"}),(0,c.jsx)("p",{className:"value value--small",children:o(P.lastInteractionAt)}),(0,c.jsx)("span",{children:"Latest recorded interaction"})]})]}),(0,c.jsxs)("section",{className:"student-analytics__section",children:[(0,c.jsxs)("div",{className:"student-analytics__section-header",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Format distribution"}),(0,c.jsx)("p",{children:"Track how you divide time between text, video, and audio."})]}),(0,c.jsxs)("div",{className:"analytics-chart__controls",children:[(0,c.jsx)("button",{type:"button",className:"analytics-chart__toggle",onClick:()=>A(e=>!e),children:"Chart type \u25be"}),L&&(0,c.jsx)("div",{className:"analytics-chart__menu",children:["bar","pie"].map(e=>(0,c.jsx)("button",{type:"button",className:M===e?"is-active":"",onClick:()=>{C(e),A(!1)},children:"bar"===e?"Bar chart":"Pie chart"},e))})]})]}),(0,c.jsx)("div",{className:"analytics-chart analytics-chart--".concat(M),children:"bar"===M?(0,c.jsxs)("div",{className:"analytics-chart__bars",children:[0===T.length&&(0,c.jsx)("p",{className:"muted",children:"No format data yet."}),T.map((e,s)=>{const a=B?Math.max(8,Math.round(e.timeSpentSeconds/B*100)):0;return(0,c.jsxs)("div",{className:"analytics-chart__bar",children:[(0,c.jsxs)("div",{className:"analytics-chart__bar-label",children:[(0,c.jsx)("span",{children:e.label}),(0,c.jsx)("span",{children:r(e.timeSpentSeconds)})]}),(0,c.jsx)("div",{className:"analytics-chart__bar-track",children:(0,c.jsx)("div",{className:"analytics-chart__bar-fill",style:{width:"".concat(a,"%"),background:d[s%d.length]}})})]},e.label)})]}):(0,c.jsxs)("div",{className:"analytics-chart__pie",children:[(0,c.jsx)("div",{className:"analytics-chart__pie-graphic",style:{background:R}}),(0,c.jsx)("ul",{className:"analytics-chart__legend",children:T.map((e,s)=>(0,c.jsxs)("li",{children:[(0,c.jsx)("span",{className:"dot",style:{background:d[s%d.length]}}),(0,c.jsx)("span",{children:e.label}),(0,c.jsx)("strong",{children:r(e.timeSpentSeconds)})]},e.label))})]})})]}),(0,c.jsxs)("section",{className:"student-analytics__section",children:[(0,c.jsx)("h2",{children:"Engagement timeline"}),(0,c.jsxs)("div",{className:"student-analytics__timeline",children:[0===E.length&&(0,c.jsx)("p",{className:"muted",children:"Learning data will appear here soon."}),E.map(e=>(0,c.jsxs)("div",{className:"timeline-point",children:[(0,c.jsx)("div",{className:"timeline-point__bar",style:{height:"".concat(Math.max(8,e.timeSpentSeconds/z*90),"%")}}),(0,c.jsx)("span",{children:e._id.slice(5)})]},e._id))]})]}),(0,c.jsxs)("section",{className:"student-analytics__section student-analytics__section--split",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Most engaging materials"}),(0,c.jsxs)("ul",{className:"student-analytics__list",children:[0===F.length&&(0,c.jsx)("li",{className:"muted",children:"No materials tracked yet."}),F.map(e=>(0,c.jsxs)("li",{children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:e.title}),(0,c.jsxs)("span",{children:[e.format," \u2022 ",e.category]})]}),(0,c.jsx)("div",{className:"value",children:r(e.timeSpentSeconds)})]},e.contentId))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Recent sessions"}),(0,c.jsxs)("ul",{className:"student-analytics__list",children:[0===I.length&&(0,c.jsx)("li",{className:"muted",children:"Start a lesson to see activity."}),I.map(e=>(0,c.jsxs)("li",{children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:e.title}),(0,c.jsxs)("span",{children:[e.format," \u2022 ",e.completed?"Completed":"In progress"]}),(0,c.jsx)("small",{children:o(e.timestamp)})]}),(0,c.jsx)("div",{className:"value",children:r(e.timeSpentSeconds)})]},e.id))]})]})]})]})}}}]);
//# sourceMappingURL=555.84256af2.chunk.js.map