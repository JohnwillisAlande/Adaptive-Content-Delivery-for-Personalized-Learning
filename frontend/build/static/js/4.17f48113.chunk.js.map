{"version":3,"file":"static/js/4.17f48113.chunk.js","mappings":"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","sources":["AdminTeacherDetail.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ClipLoader from 'react-spinners/ClipLoader';\nimport { FaArrowLeft, FaEnvelope, FaUserTie, FaUsers, FaClock } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport api from './api';\nimport { useAuth } from './context/AuthContext';\n\nconst FILE_BASE_URL = process.env.REACT_APP_FILE_BASE_URL || 'http://localhost:5000';\nconst resolveImage = (image) => {\n  if (!image) return '';\n  if (image.startsWith('http')) return image;\n  if (image.startsWith('/uploaded_files')) return `${FILE_BASE_URL}${image}`;\n  return `${FILE_BASE_URL}/uploaded_files/${image}`;\n};\n\nconst formatNumber = (value = 0) => Number(value || 0).toLocaleString();\nconst formatTime = (seconds = 0) => {\n  if (!seconds) return '0 mins';\n  const minutes = Math.round(seconds / 60);\n  return `${minutes.toLocaleString()} mins`;\n};\nconst formatDate = (value) => (value ? new Date(value).toLocaleString() : '—');\n\nfunction AdminTeacherDetail() {\n  const { teacherId } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [payload, setPayload] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (user?.userType !== 'Admin') {\n      toast.error('Administrators only');\n      navigate('/teachers', { replace: true });\n      return;\n    }\n    let active = true;\n    const loadData = async () => {\n      setLoading(true);\n      try {\n        const { data } = await api.get(`/admin/teachers/${teacherId}`);\n        if (!active) return;\n        setPayload(data);\n      } catch (err) {\n        if (!active) return;\n        toast.error(err.response?.data?.error || 'Failed to load teacher details');\n        navigate('/teachers', { replace: true });\n      } finally {\n        if (active) setLoading(false);\n      }\n    };\n    loadData();\n    return () => {\n      active = false;\n    };\n  }, [teacherId, user?.userType, navigate]);\n\n  const recentEntries = useMemo(() => payload?.recentInteractions || [], [payload]);\n  const teacher = payload?.teacher;\n  const overview = payload?.overview || {};\n  const courses = payload?.courses || [];\n\n  if (loading) {\n    return (\n      <div className=\"admin-teacher-detail admin-teacher-detail--loading\">\n        <ClipLoader color=\"#14b8a6\" size={46} />\n      </div>\n    );\n  }\n\n  if (!payload || !teacher) {\n    return null;\n  }\n\n  return (\n    <div className=\"admin-teacher-detail\">\n      <button type=\"button\" className=\"option-btn admin-teacher-detail__back\" onClick={() => navigate('/teachers')}>\n        <FaArrowLeft /> Back to Teachers\n      </button>\n\n      <header className=\"admin-teacher-detail__hero\">\n        <div className=\"admin-teacher-detail__identity\">\n          <div className=\"avatar\">\n            {teacher.image ? <img src={resolveImage(teacher.image)} alt={teacher.name} /> : <FaUserTie />}\n          </div>\n          <div>\n            <h1>{teacher.name}</h1>\n            <p><FaEnvelope /> {teacher.email}</p>\n            <p className=\"muted\">Registered {formatDate(teacher.registeredAt)}</p>\n            <p className=\"muted\">\n              Last seen {formatDate(teacher.lastActiveAt)} • {teacher.online ? 'Online' : 'Offline'}\n            </p>\n          </div>\n        </div>\n        <div className=\"admin-teacher-detail__hero-stats\">\n          <div>\n            <span>Total Courses</span>\n            <strong>{overview.totalCourses ?? 0}</strong>\n          </div>\n          <div>\n            <span>Total Students</span>\n            <strong>{formatNumber(overview.totalStudents)}</strong>\n          </div>\n          <div>\n            <span>Total Materials</span>\n            <strong>{formatNumber(overview.totalMaterials)}</strong>\n          </div>\n          <div>\n            <span>Unique Learners</span>\n            <strong>{formatNumber(overview.uniqueLearners)}</strong>\n          </div>\n        </div>\n      </header>\n\n      <section className=\"admin-teacher-detail__grid\">\n        <article>\n          <h2><FaUsers /> Engagement Overview</h2>\n          <ul>\n            <li>\n              <span>Total Visits</span>\n              <strong>{formatNumber(overview.totalVisits)}</strong>\n            </li>\n            <li>\n              <span>Learning Minutes</span>\n              <strong>{formatTime(overview.totalTimeSpentSeconds)}</strong>\n            </li>\n            <li>\n              <span>Avg Time / Course</span>\n              <strong>{formatTime(overview.averageTimePerCourse)}</strong>\n            </li>\n          </ul>\n        </article>\n        <article>\n          <h2><FaClock /> Recent Activity</h2>\n          {recentEntries.length === 0 ? (\n            <p className=\"muted\">No recent activity recorded.</p>\n          ) : (\n            <ul className=\"admin-teacher-detail__activity\">\n              {recentEntries.map((entry) => (\n                <li key={entry.id}>\n                  <div>\n                    <span>Course</span>\n                    <strong>{entry.courseTitle}</strong>\n                  </div>\n                  <div>\n                    <span>Time Spent</span>\n                    <strong>{formatTime(entry.timeSpentSeconds)}</strong>\n                  </div>\n                  <div>\n                    <span>Completed</span>\n                    <strong>{entry.completed ? 'Yes' : 'No'}</strong>\n                  </div>\n                  <div>\n                    <span>When</span>\n                    <strong>{formatDate(entry.timestamp)}</strong>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n        </article>\n      </section>\n\n      <section className=\"admin-teacher-detail__courses\">\n        <div className=\"header\">\n          <h2>Courses Taught</h2>\n        </div>\n        {courses.length === 0 ? (\n          <p className=\"muted\">This teacher has not published any courses yet.</p>\n        ) : (\n          <div className=\"admin-teacher-detail__courses-table\">\n            <div className=\"table-row table-row--head\">\n              <span>Course</span>\n              <span>Created</span>\n              <span>Students</span>\n              <span>Materials</span>\n              <span>Visits</span>\n              <span>Learning Time</span>\n            </div>\n            {courses.map((course) => (\n              <div key={course.courseId} className=\"table-row\">\n                <span className=\"table-cell table-cell--title\">{course.title}</span>\n                <span className=\"table-cell\">{formatDate(course.createdAt)}</span>\n                <span className=\"table-cell\">{formatNumber(course.students)}</span>\n                <span className=\"table-cell\">{formatNumber(course.materialsCount)}</span>\n                <span className=\"table-cell\">{formatNumber(course.totalVisits)}</span>\n                <span className=\"table-cell\">{formatTime(course.totalTimeSpentSeconds)}</span>\n              </div>\n            ))}\n          </div>\n        )}\n      </section>\n\n      <div className=\"admin-teacher-detail__actions\">\n        <button type=\"button\" className=\"inline-btn\" onClick={() => navigate(`/admin/teachers/${teacherId}/logs`)}>\n          View Logs\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default AdminTeacherDetail;\n"],"names":["FILE_BASE_URL","process","REACT_APP_FILE_BASE_URL","formatNumber","Number","arguments","length","undefined","toLocaleString","formatTime","seconds","minutes","Math","round","concat","formatDate","value","Date","_overview$totalCourse","teacherId","useParams","navigate","useNavigate","user","useAuth","payload","setPayload","useState","loading","setLoading","useEffect","userType","toast","error","replace","active","async","data","api","get","err","_err$response","_err$response$data","response","loadData","recentEntries","useMemo","recentInteractions","teacher","overview","courses","_jsx","className","children","ClipLoader","color","size","_jsxs","type","onClick","FaArrowLeft","image","src","startsWith","alt","name","FaUserTie","FaEnvelope","email","registeredAt","lastActiveAt","online","totalCourses","totalStudents","totalMaterials","uniqueLearners","FaUsers","totalVisits","totalTimeSpentSeconds","averageTimePerCourse","FaClock","map","entry","courseTitle","timeSpentSeconds","completed","timestamp","id","course","title","createdAt","students","materialsCount","courseId"],"sourceRoot":""}