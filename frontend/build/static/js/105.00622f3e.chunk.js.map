{"version":3,"file":"static/js/105.00622f3e.chunk.js","mappings":"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","sources":["StudentCourses.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport ClipLoader from 'react-spinners/ClipLoader';\nimport api from './api';\nimport { useAuth } from './context/AuthContext';\n\nconst FILE_BASE_URL = process.env.REACT_APP_FILE_BASE_URL || 'http://localhost:5000';\nconst FALLBACK_IMAGE = 'https://images.unsplash.com/photo-1523580846011-d3a5bc25702b?w=1200&q=80';\n\nconst resolveThumb = (course) => {\n  const candidate =\n    course?.thumbnail ||\n    course?.thumb ||\n    course?.backgroundImage ||\n    course?.image;\n\n  if (!candidate) return FALLBACK_IMAGE;\n  if (candidate.startsWith('http')) return candidate;\n  if (candidate.startsWith('/')) return `${FILE_BASE_URL}${candidate}`;\n  return `${FILE_BASE_URL}/uploaded_files/${candidate}`;\n};\n\nconst clampProgress = (value) => {\n  if (Number.isNaN(value)) return 0;\n  return Math.min(100, Math.max(0, Math.round(value)));\n};\n\nfunction StudentCourses() {\n  const navigate = useNavigate();\n  const { user, isAuthenticated, initializing } = useAuth();\n  const [courses, setCourses] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (initializing) return;\n\n    if (!isAuthenticated) {\n      toast.error('Please login to view your courses');\n      navigate('/login', { replace: true });\n      return;\n    }\n\n    if (user?.userType !== 'Student') {\n      toast.error('Students only');\n      navigate('/home', { replace: true });\n      return;\n    }\n\n    let active = true;\n    const loadCourses = async () => {\n      setLoading(true);\n      try {\n        const { data } = await api.get('/courses/student/my');\n        if (!active) return;\n        setCourses(Array.isArray(data) ? data : []);\n      } catch (err) {\n        if (!active) return;\n        toast.error(err.response?.data?.error || 'Failed to load enrolled courses');\n      } finally {\n        if (active) setLoading(false);\n      }\n    };\n\n    loadCourses();\n    return () => {\n      active = false;\n    };\n  }, [initializing, isAuthenticated, user?.userType, navigate]);\n\n  const sortedCourses = useMemo(() => {\n    return [...courses].sort((a, b) => {\n      const progressA = clampProgress(a?.progressPercent ?? a?.progress ?? 0);\n      const progressB = clampProgress(b?.progressPercent ?? b?.progress ?? 0);\n      return progressB - progressA;\n    });\n  }, [courses]);\n\n  const handleOpenCourse = async (course) => {\n    const courseId = course?.id || course?._id || course?.courseId;\n    if (!courseId) return;\n\n    let targetPath = `/courses/${courseId}`;\n    try {\n      const { data } = await api.get(`/courses/${courseId}`, {\n        params: { page: 1, pageSize: 1, format: 'All' }\n      });\n      const requiresEnrollment = Boolean(data?.enrollmentRequired);\n      const materials = Array.isArray(data?.materials) ? data.materials : [];\n      if (!requiresEnrollment && materials.length > 0) {\n        const firstMaterial = materials[0];\n        const materialId = firstMaterial?._id || firstMaterial?.id;\n        if (materialId) {\n          targetPath = `/courses/${courseId}/materials/${materialId}`;\n        }\n      }\n    } catch (err) {\n      // Ignore errors and fall back to the course overview\n    }\n\n    navigate(targetPath);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-[#0f1117] text-white\">\n        <ClipLoader color=\"#14b8a6\" size={32} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"main-content\">\n      <h1 className=\"heading\">My Courses</h1>\n      <p className=\"subheading\">\n        Track your progress, revisit completed lessons, and pick up exactly where you left off.\n      </p>\n\n      <div className=\"box-container\">\n        {sortedCourses.length === 0 ? (\n          <div className=\"empty\">\n            You have not enrolled in any courses yet. Visit the catalogue to start learning.\n          </div>\n        ) : (\n          sortedCourses.map((course) => {\n            const id = course.id || course._id || course.courseId;\n            const title = course.title || course.name || 'Untitled course';\n            const subtitle = course.subtitle || course.tagline || '';\n            const description = course.description || course.summary || '';\n            const duration = course.duration || course.length || '';\n            const completed = course.completedMaterials ?? course.completedLessons ?? 0;\n            const total = course.totalMaterials ?? course.totalLessons ?? course.lessons ?? 0;\n            const progress = clampProgress(course?.progressPercent ?? course?.progress ?? 0);\n            const progressLabel = `${progress}% complete`;\n\n            return (\n              <div\n                className=\"box my-course-card\"\n                key={id || title}\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => handleOpenCourse(course)}\n                onKeyDown={(event) => {\n                  if (event.key === 'Enter') handleOpenCourse(course);\n                }}\n                style={{ cursor: 'pointer' }}\n              >\n                <div className=\"relative mb-4\">\n                  <img\n                    src={resolveThumb(course)}\n                    alt={title}\n                    className=\"thumb\"\n                    style={{ width: '100%', height: '200px', objectFit: 'cover', borderRadius: '0.75rem' }}\n                    loading=\"lazy\"\n                  />\n                  <span className=\"absolute top-3 left-3 bg-teal-500 text-white text-xs font-semibold px-3 py-1 rounded-full shadow\">\n                    {progressLabel}\n                  </span>\n                </div>\n\n                <div className=\"title\">{title}</div>\n                {subtitle && <div style={{ color: '#8892b0', marginBottom: '0.5rem' }}>{subtitle}</div>}\n                {description && <div style={{ marginBottom: '1rem', color: '#94a3b8' }}>{description}</div>}\n\n                <div className=\"my-course-meta\">\n                  {duration && <span>{duration}</span>}\n                  {total > 0 && (\n                    <span>\n                      {completed} / {total} materials\n                    </span>\n                  )}\n                </div>\n\n                <div className=\"my-course-progress\" aria-label={`Course completion ${progressLabel}`} role=\"progressbar\" aria-valuenow={progress} aria-valuemin={0} aria-valuemax={100}>\n                  <div className=\"my-course-progress__track\">\n                    <div className=\"my-course-progress__value\" style={{ width: `${progress}%` }} />\n                  </div>\n                  <span className=\"my-course-progress__label\">{progress}%</span>\n                </div>\n\n                <button\n                  type=\"button\"\n                  className=\"inline-btn\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleOpenCourse(course);\n                  }}\n                  aria-label={`Continue learning ${title}`}\n                >\n                  Continue learning\n                </button>\n              </div>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default StudentCourses;\r\n"],"names":["FILE_BASE_URL","process","REACT_APP_FILE_BASE_URL","resolveThumb","course","candidate","thumbnail","thumb","backgroundImage","image","startsWith","concat","clampProgress","value","Number","isNaN","Math","min","max","round","navigate","useNavigate","user","isAuthenticated","initializing","useAuth","courses","setCourses","useState","loading","setLoading","useEffect","toast","error","replace","userType","active","async","data","api","get","Array","isArray","err","_err$response","_err$response$data","response","loadCourses","sortedCourses","useMemo","sort","a","b","_ref","_a$progressPercent","_ref2","_b$progressPercent","progressA","progressPercent","progress","handleOpenCourse","courseId","id","_id","targetPath","params","page","pageSize","format","requiresEnrollment","Boolean","enrollmentRequired","materials","length","firstMaterial","materialId","_jsx","className","children","ClipLoader","color","size","_jsxs","map","_ref3","_course$completedMate","_ref4","_ref5","_course$totalMaterial","_ref6","_course$progressPerce","title","name","subtitle","tagline","description","summary","duration","completed","completedMaterials","completedLessons","total","totalMaterials","totalLessons","lessons","progressLabel","role","tabIndex","onClick","onKeyDown","event","key","style","cursor","src","alt","width","height","objectFit","borderRadius","marginBottom","type","e","stopPropagation"],"sourceRoot":""}