{"version":3,"file":"static/js/856.1153d5dc.chunk.js","mappings":"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","sources":["AdminCourseAnalytics.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ClipLoader from 'react-spinners/ClipLoader';\nimport { FaArrowLeft, FaUsers, FaRegClock, FaBook, FaChartPie } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport api from './api';\nimport { useAuth } from './context/AuthContext';\n\nconst formatNumber = (value = 0) => {\n  if (value == null) return '0';\n  return value.toLocaleString();\n};\n\nconst secondsToMinutes = (seconds = 0) => {\n  if (!seconds) return '0 min';\n  const minutes = Math.round(seconds / 60);\n  return `${minutes.toLocaleString()} min`;\n};\n\nfunction AdminCourseAnalytics() {\n  const { courseId } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const isAdmin = user?.userType === 'Admin';\n  const isTeacher = user?.userType === 'Teacher';\n  const [loading, setLoading] = useState(true);\n  const [payload, setPayload] = useState(null);\n  const [expandedMaterialId, setExpandedMaterialId] = useState(null);\n  const [refreshing, setRefreshing] = useState(false);\n  const metricsEndpoint = useMemo(() => {\n    if (isAdmin) return `/courses/admin/${courseId}/metrics`;\n    if (isTeacher) return `/courses/teacher/${courseId}/metrics`;\n    return null;\n  }, [isAdmin, isTeacher, courseId]);\n  const backPath = isAdmin ? '/courses' : '/teacher/courses';\n\n  useEffect(() => {\n    if (!metricsEndpoint) {\n      toast.error('You are not authorized to view course metrics');\n      navigate('/courses', { replace: true });\n      return;\n    }\n    let active = true;\n    const loadMetrics = async ({ showSpinner = false } = {}) => {\n      if (showSpinner) {\n        setLoading(true);\n      } else {\n        setRefreshing(true);\n      }\n      try {\n        const { data } = await api.get(metricsEndpoint);\n        if (!active) return;\n        setPayload(data);\n      } catch (err) {\n        if (!active) return;\n        toast.error(err.response?.data?.error || 'Failed to load course metrics');\n      } finally {\n        if (!active) return;\n        if (showSpinner) {\n          setLoading(false);\n        } else {\n          setRefreshing(false);\n        }\n      }\n    };\n    loadMetrics({ showSpinner: true });\n    const intervalId = setInterval(() => loadMetrics({ showSpinner: false }), 15000);\n    return () => {\n      active = false;\n      clearInterval(intervalId);\n    };\n  }, [courseId, navigate, metricsEndpoint]);\n\n  const creationDate = useMemo(() => {\n    if (!payload?.course?.createdAt) return '—';\n    return new Date(payload.course.createdAt).toLocaleString();\n  }, [payload?.course?.createdAt]);\n\n  const formatGraphData = useMemo(() => {\n    const metrics = payload?.metrics;\n    if (!metrics) return [];\n    const desiredOrder = ['Visual', 'Verbal', 'Audio'];\n    const lookup = {};\n    (metrics.formatBreakdown || []).forEach((item) => {\n      lookup[item.label] = item.count;\n    });\n    return desiredOrder.map((label) => ({\n      label,\n      count: lookup[label] || 0\n    }));\n  }, [payload?.metrics]);\n  const formatGraphTotal = formatGraphData.reduce((sum, item) => sum + item.count, 0);\n  const materials = payload?.metrics?.materials || [];\n\n  const handleToggleMaterial = (materialId) => {\n    setExpandedMaterialId((prev) => (prev === materialId ? null : materialId));\n  };\n\n  const formatMaterialDate = (value) => (value ? new Date(value).toLocaleString() : '—');\n\n  if (loading) {\n    return (\n      <div className=\"admin-course-analytics admin-course-analytics--loading\">\n        <ClipLoader color=\"#14b8a6\" size={42} />\n      </div>\n    );\n  }\n\n  if (!payload) {\n    return (\n      <div className=\"admin-course-analytics\">\n        <div className=\"admin-course-analytics__empty\">\n          <p>Unable to load course analytics.</p>\n          <button type=\"button\" className=\"inline-btn\" onClick={() => navigate(backPath)}>\n            Back to Courses\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const { course, metrics } = payload;\n\n  const summaryTiles = [\n    {\n      label: 'Students Enrolled',\n      value: formatNumber(metrics.totalEnrollments),\n      icon: <FaUsers />\n    },\n    {\n      label: 'Total Visits',\n      value: formatNumber(metrics.totalVisits),\n      icon: <FaChartPie />\n    },\n    {\n      label: 'Learning Minutes',\n      value: secondsToMinutes(metrics.totalTimeSpentSeconds),\n      icon: <FaRegClock />\n    },\n    {\n      label: 'Materials Published',\n      value: formatNumber(metrics.totalMaterials),\n      icon: <FaBook />\n    }\n  ];\n\n  return (\n    <div className=\"admin-course-analytics\">\n      <button\n        type=\"button\"\n        className=\"option-btn admin-course-analytics__back\"\n        onClick={() => navigate(backPath)}\n      >\n        <FaArrowLeft /> Back to Courses\n      </button>\n      {refreshing && <span className=\"admin-course-analytics__refresh-indicator\">Updating metrics…</span>}\n      <div className=\"admin-course-analytics__hero\">\n        <div>\n          <p className=\"admin-course-analytics__eyebrow\">Course Insights</p>\n          <h1>{course.title}</h1>\n          <p>{course.description}</p>\n        </div>\n        <dl>\n          <div>\n            <dt>Teacher</dt>\n            <dd>{course.teacherName || 'Unknown'}</dd>\n          </div>\n          <div>\n            <dt>Created</dt>\n            <dd>{creationDate}</dd>\n          </div>\n          <div>\n            <dt>Status</dt>\n            <dd>{course.suspended ? 'Suspended' : 'Active'}</dd>\n          </div>\n        </dl>\n      </div>\n\n      <div className=\"admin-course-analytics__grid\">\n        {summaryTiles.map((tile) => (\n          <article key={tile.label} className=\"admin-course-analytics__tile\">\n            <div className=\"admin-course-analytics__tile-icon\">{tile.icon}</div>\n            <div>\n              <p className=\"label\">{tile.label}</p>\n              <p className=\"value\">{tile.value}</p>\n            </div>\n          </article>\n        ))}\n      </div>\n\n      <section className=\"admin-course-analytics__section\">\n        <h2>Engagement Metrics</h2>\n        <div className=\"admin-course-analytics__stats\">\n          <div>\n            <p className=\"label\">Unique Learners</p>\n            <p className=\"value\">{formatNumber(metrics.uniqueLearners)}</p>\n          </div>\n          <div>\n            <p className=\"label\">Average Time / Visit</p>\n            <p className=\"value\">{secondsToMinutes(metrics.averageTimePerVisit)}</p>\n          </div>\n          <div>\n            <p className=\"label\">Completed Sessions</p>\n            <p className=\"value\">\n              {formatNumber(metrics.completionCount)} ({(metrics.completionRate * 100).toFixed(1)}%)\n            </p>\n          </div>\n          <div>\n            <p className=\"label\">Last Interaction</p>\n            <p className=\"value\">\n              {metrics.lastInteractionAt ? new Date(metrics.lastInteractionAt).toLocaleString() : '—'}\n            </p>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"admin-course-analytics__section admin-course-analytics__section--split\">\n        <div>\n          <h3>Materials by Category</h3>\n          <ul>\n            {(metrics.materialBreakdown || []).map((item) => (\n              <li key={item.label}>\n                <span>{item.label}</span>\n                <strong>{formatNumber(item.count)}</strong>\n              </li>\n            ))}\n          </ul>\n        </div>\n        <div>\n          <h3>Materials by Format</h3>\n          <ul>\n            {(metrics.formatBreakdown || []).map((item) => (\n              <li key={item.label}>\n                <span>{item.label}</span>\n                <strong>{formatNumber(item.count)}</strong>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </section>\n\n      <section className=\"admin-course-analytics__section\">\n        <h3>Visual vs Verbal vs Audio</h3>\n        <div className=\"format-distribution\">\n          {formatGraphData.map((item) => {\n            const percent = formatGraphTotal ? (item.count / formatGraphTotal) * 100 : 0;\n            return (\n              <div key={item.label} className=\"format-distribution__row\">\n                <span className=\"format-distribution__label\">{item.label}</span>\n                <div className=\"format-distribution__bar\">\n                  <div style={{ width: `${percent}%` }} />\n                </div>\n                <span className=\"format-distribution__value\">{item.count}</span>\n              </div>\n            );\n          })}\n          {formatGraphTotal === 0 && (\n            <p className=\"muted\">No materials have been uploaded for this distribution yet.</p>\n          )}\n        </div>\n      </section>\n\n      <section className=\"admin-course-analytics__section\">\n        <h3>Recent Activity</h3>\n        {metrics.recentInteractions && metrics.recentInteractions.length ? (\n          <div className=\"admin-course-analytics__recent\">\n            {metrics.recentInteractions.map((entry) => (\n              <article key={entry._id || entry.id} className=\"admin-course-analytics__recent-item\">\n                <div>\n                  <p className=\"label\">Learner</p>\n                  <p>#{(entry.userId || entry.user_id || '').slice(-6) || '—'}</p>\n                </div>\n                <div>\n                  <p className=\"label\">Category</p>\n                  <p>{entry.annotations?.category || '—'}</p>\n                </div>\n                <div>\n                  <p className=\"label\">Time Spent</p>\n                  <p>{secondsToMinutes(entry.timeSpentSeconds)}</p>\n                </div>\n                <div>\n                  <p className=\"label\">Completed</p>\n                  <p>{entry.completed ? 'Yes' : 'No'}</p>\n                </div>\n                <div>\n                  <p className=\"label\">When</p>\n                  <p>{entry.timestamp ? new Date(entry.timestamp).toLocaleString() : '—'}</p>\n                </div>\n              </article>\n            ))}\n          </div>\n        ) : (\n          <p className=\"text-muted\">No recent interactions captured.</p>\n        )}\n      </section>\n\n      <section className=\"admin-course-analytics__section admin-course-analytics__materials\">\n        <h3>Course Materials</h3>\n        {materials.length === 0 ? (\n          <p className=\"muted\">No materials have been uploaded for this course.</p>\n        ) : (\n          <div className=\"material-accordion\">\n            {materials.map((material) => {\n              const materialKey = material._id || material.id;\n              const isExpanded = expandedMaterialId === materialKey;\n              return (\n                <div\n                  key={materialKey}\n                  className={`material-accordion__item${isExpanded ? ' material-accordion__item--expanded' : ''}`}\n                >\n                  <button\n                    type=\"button\"\n                    className=\"material-accordion__header\"\n                    onClick={() => handleToggleMaterial(materialKey)}\n                  >\n                    <div>\n                      <h4>{material.title}</h4>\n                      <p>Uploaded {formatMaterialDate(material.uploadedAt)}</p>\n                    </div>\n                    <div className=\"material-accordion__meta\">\n                      <span>{material.annotations?.format || '—'}</span>\n                      <span>{material.annotations?.category || '—'}</span>\n                    </div>\n                  </button>\n                  {isExpanded && (\n                    <div className=\"material-accordion__details\">\n                      <div>\n                        <span>Clicks</span>\n                        <strong>{formatNumber(material.stats?.clicks || 0)}</strong>\n                      </div>\n                      <div>\n                        <span>Avg View Time</span>\n                        <strong>{secondsToMinutes(material.stats?.avgTimeSpentSeconds || 0)}</strong>\n                      </div>\n                      <div>\n                        <span>Completions</span>\n                        <strong>{formatNumber(material.stats?.completions || 0)}</strong>\n                      </div>\n                      <div>\n                        <span>Last Viewed</span>\n                        <strong>{formatMaterialDate(material.stats?.lastViewedAt)}</strong>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </section>\n    </div>\n  );\n}\n\nexport default AdminCourseAnalytics;\n"],"names":["formatNumber","value","arguments","length","undefined","toLocaleString","secondsToMinutes","seconds","minutes","Math","round","concat","_payload$course2","_payload$metrics","courseId","useParams","navigate","useNavigate","user","useAuth","isAdmin","userType","isTeacher","loading","setLoading","useState","payload","setPayload","expandedMaterialId","setExpandedMaterialId","refreshing","setRefreshing","metricsEndpoint","useMemo","backPath","useEffect","toast","error","replace","active","loadMetrics","async","showSpinner","data","api","get","err","_err$response","_err$response$data","response","intervalId","setInterval","clearInterval","creationDate","_payload$course","course","createdAt","Date","formatGraphData","metrics","lookup","formatBreakdown","forEach","item","label","count","map","formatGraphTotal","reduce","sum","materials","formatMaterialDate","_jsx","className","children","ClipLoader","color","size","_jsxs","type","onClick","summaryTiles","totalEnrollments","icon","FaUsers","totalVisits","FaChartPie","totalTimeSpentSeconds","FaRegClock","totalMaterials","FaBook","FaArrowLeft","title","description","teacherName","suspended","tile","uniqueLearners","averageTimePerVisit","completionCount","completionRate","toFixed","lastInteractionAt","materialBreakdown","percent","style","width","recentInteractions","entry","_entry$annotations","userId","user_id","slice","annotations","category","timeSpentSeconds","completed","timestamp","_id","id","material","_material$annotations","_material$annotations2","_material$stats","_material$stats2","_material$stats3","_material$stats4","materialKey","isExpanded","handleToggleMaterial","materialId","prev","uploadedAt","format","stats","clicks","avgTimeSpentSeconds","completions","lastViewedAt"],"sourceRoot":""}