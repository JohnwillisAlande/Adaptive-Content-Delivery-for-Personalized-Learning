"use strict";(self.webpackChunkapex101_frontend=self.webpackChunkapex101_frontend||[]).push([[4],{4:(e,s,n)=>{n.r(s),n.d(s,{default:()=>p});var a=n(43),i=n(439),t=n(939),l=n.n(t),r=n(204),c=n(488),d=n(768),o=n(697),h=n(579);const x={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GEMINI_API_KEY:"AIzaSyCrxqeqgsp8qubxzmo4Yvzzh7S7-0hzXEc",REACT_APP_GOOGLE_CLIENT_ID:"776006269077-683ndu3i60s7o3tu1bn1m1rb3mukc03u.apps.googleusercontent.com"}.REACT_APP_FILE_BASE_URL||"http://localhost:5000",j=function(){return Number((arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||0).toLocaleString()},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!e)return"0 mins";const s=Math.round(e/60);return"".concat(s.toLocaleString()," mins")},m=e=>e?new Date(e).toLocaleString():"\u2014";const p=function(){var e;const{teacherId:s}=(0,i.g)(),n=(0,i.Zp)(),{user:t}=(0,o.A)(),[p,v]=(0,a.useState)(null),[_,g]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if("Admin"!==(null===t||void 0===t?void 0:t.userType))return c.oR.error("Administrators only"),void n("/teachers",{replace:!0});let e=!0;return(async()=>{g(!0);try{const{data:n}=await d.A.get("/admin/teachers/".concat(s));if(!e)return;v(n)}catch(t){var a,i;if(!e)return;c.oR.error((null===(a=t.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error)||"Failed to load teacher details"),n("/teachers",{replace:!0})}finally{e&&g(!1)}})(),()=>{e=!1}},[s,null===t||void 0===t?void 0:t.userType,n]);const N=(0,a.useMemo)(()=>(null===p||void 0===p?void 0:p.recentInteractions)||[],[p]),b=null===p||void 0===p?void 0:p.teacher,S=(null===p||void 0===p?void 0:p.overview)||{},T=(null===p||void 0===p?void 0:p.courses)||[];return _?(0,h.jsx)("div",{className:"admin-teacher-detail admin-teacher-detail--loading",children:(0,h.jsx)(l(),{color:"#14b8a6",size:46})}):p&&b?(0,h.jsxs)("div",{className:"admin-teacher-detail",children:[(0,h.jsxs)("button",{type:"button",className:"option-btn admin-teacher-detail__back",onClick:()=>n("/teachers"),children:[(0,h.jsx)(r.QVr,{})," Back to Teachers"]}),(0,h.jsxs)("header",{className:"admin-teacher-detail__hero",children:[(0,h.jsxs)("div",{className:"admin-teacher-detail__identity",children:[(0,h.jsx)("div",{className:"avatar",children:b.image?(0,h.jsx)("img",{src:(C=b.image,C?C.startsWith("http")?C:C.startsWith("/uploaded_files")?"".concat(x).concat(C):"".concat(x,"/uploaded_files/").concat(C):""),alt:b.name}):(0,h.jsx)(r.p7b,{})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{children:b.name}),(0,h.jsxs)("p",{children:[(0,h.jsx)(r.maD,{})," ",b.email]}),(0,h.jsxs)("p",{className:"muted",children:["Registered ",m(b.registeredAt)]}),(0,h.jsxs)("p",{className:"muted",children:["Last seen ",m(b.lastActiveAt)," \u2022 ",b.online?"Online":"Offline"]})]})]}),(0,h.jsxs)("div",{className:"admin-teacher-detail__hero-stats",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Total Courses"}),(0,h.jsx)("strong",{children:null!==(e=S.totalCourses)&&void 0!==e?e:0})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Total Students"}),(0,h.jsx)("strong",{children:j(S.totalStudents)})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Total Materials"}),(0,h.jsx)("strong",{children:j(S.totalMaterials)})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Unique Learners"}),(0,h.jsx)("strong",{children:j(S.uniqueLearners)})]})]})]}),(0,h.jsxs)("section",{className:"admin-teacher-detail__grid",children:[(0,h.jsxs)("article",{children:[(0,h.jsxs)("h2",{children:[(0,h.jsx)(r.YXz,{})," Engagement Overview"]}),(0,h.jsxs)("ul",{children:[(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"Total Visits"}),(0,h.jsx)("strong",{children:j(S.totalVisits)})]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"Learning Minutes"}),(0,h.jsx)("strong",{children:u(S.totalTimeSpentSeconds)})]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"Avg Time / Course"}),(0,h.jsx)("strong",{children:u(S.averageTimePerCourse)})]})]})]}),(0,h.jsxs)("article",{children:[(0,h.jsxs)("h2",{children:[(0,h.jsx)(r.w_X,{})," Recent Activity"]}),0===N.length?(0,h.jsx)("p",{className:"muted",children:"No recent activity recorded."}):(0,h.jsx)("ul",{className:"admin-teacher-detail__activity",children:N.map(e=>(0,h.jsxs)("li",{children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Course"}),(0,h.jsx)("strong",{children:e.courseTitle})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Time Spent"}),(0,h.jsx)("strong",{children:u(e.timeSpentSeconds)})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Completed"}),(0,h.jsx)("strong",{children:e.completed?"Yes":"No"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"When"}),(0,h.jsx)("strong",{children:m(e.timestamp)})]})]},e.id))})]})]}),(0,h.jsxs)("section",{className:"admin-teacher-detail__courses",children:[(0,h.jsx)("div",{className:"header",children:(0,h.jsx)("h2",{children:"Courses Taught"})}),0===T.length?(0,h.jsx)("p",{className:"muted",children:"This teacher has not published any courses yet."}):(0,h.jsxs)("div",{className:"admin-teacher-detail__courses-table",children:[(0,h.jsxs)("div",{className:"table-row table-row--head",children:[(0,h.jsx)("span",{children:"Course"}),(0,h.jsx)("span",{children:"Created"}),(0,h.jsx)("span",{children:"Students"}),(0,h.jsx)("span",{children:"Materials"}),(0,h.jsx)("span",{children:"Visits"}),(0,h.jsx)("span",{children:"Learning Time"})]}),T.map(e=>(0,h.jsxs)("div",{className:"table-row",children:[(0,h.jsx)("span",{className:"table-cell table-cell--title",children:e.title}),(0,h.jsx)("span",{className:"table-cell",children:m(e.createdAt)}),(0,h.jsx)("span",{className:"table-cell",children:j(e.students)}),(0,h.jsx)("span",{className:"table-cell",children:j(e.materialsCount)}),(0,h.jsx)("span",{className:"table-cell",children:j(e.totalVisits)}),(0,h.jsx)("span",{className:"table-cell",children:u(e.totalTimeSpentSeconds)})]},e.courseId))]})]}),(0,h.jsx)("div",{className:"admin-teacher-detail__actions",children:(0,h.jsx)("button",{type:"button",className:"inline-btn",onClick:()=>n("/admin/teachers/".concat(s,"/logs")),children:"View Logs"})})]}):null;var C}}}]);
//# sourceMappingURL=4.17f48113.chunk.js.map